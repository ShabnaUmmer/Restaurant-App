(this["webpackJsonprestaurant-name"]=this["webpackJsonprestaurant-name"]||[]).push([[0],{44:function(t,e,n){},63:function(t,e,n){},64:function(t,e,n){},65:function(t,e,n){},66:function(t,e,n){},67:function(t,e,n){},68:function(t,e,n){},69:function(t,e,n){},70:function(t,e,n){"use strict";n.r(e);var a=n(1),s=n.n(a),c=n(24),i=n.n(c),r=n(9),o=n(3),u=n(33),l=n(8),d=n(11),j=n(0),b=Object(a.createContext)(),m=function(t){var e=t.children,n=Object(a.useState)([]),s=Object(d.a)(n,2),c=s[0],i=s[1],r=Object(a.useState)(""),o=Object(d.a)(r,2),m=o[0],h=o[1];return Object(j.jsx)(b.Provider,{value:{cartList:c,restaurant_name:m,setRestaurantName:h,addCartItem:function(t){i((function(e){return e.find((function(e){return e.dish_id===t.dish_id}))?e.map((function(e){return e.dish_id===t.dish_id?Object(l.a)(Object(l.a)({},e),{},{quantity:e.quantity+t.quantity}):e})):[].concat(Object(u.a)(e),[Object(l.a)({},t)])})),t.restaurant_name&&h(t.restaurant_name)},incrementCartItemQuantity:function(t){i((function(e){return e.map((function(e){return e.dish_id===t?Object(l.a)(Object(l.a)({},e),{},{quantity:e.quantity+1}):e}))}))},decrementCartItemQuantity:function(t){i((function(e){return e.map((function(e){return e.dish_id===t?Object(l.a)(Object(l.a)({},e),{},{quantity:e.quantity-1}):e})).filter((function(t){return t.quantity>0}))}))},removeCartItem:function(t){i((function(e){return e.filter((function(e){return e.dish_id!==t}))}))},removeAllCartItems:function(){i([]),h("")},getTotalPrice:function(){return c.reduce((function(t,e){return t+e.dish_price*e.quantity}),0).toFixed(2)}},children:e})},h=n(13),O=n.n(h),p=function(t){return void 0===O.a.get("jwt_token")?Object(j.jsx)(o.a,{to:"/login"}):Object(j.jsx)(o.b,Object(l.a)({},t))},x=n(12),f=n(16),v=n(27),y=n(28),g=n(29),N=n(31),_=(n(44),function(t){Object(g.a)(n,t);var e=Object(N.a)(n);function n(){var t;Object(v.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(t=e.call.apply(e,[this].concat(s))).state={username:"",password:"",showSubmitError:!1,errorMsg:""},t.onChangeUsername=function(e){t.setState({username:e.target.value})},t.onChangePassword=function(e){t.setState({password:e.target.value})},t.onSubmitSuccess=function(e){var n=t.props.history;O.a.set("jwt_token",e,{expires:30}),n.replace("/")},t.onSubmitFailure=function(e){t.setState({showSubmitError:!0,errorMsg:e})},t.submitForm=function(){var e=Object(f.a)(Object(x.a)().mark((function e(n){var a,s,c,i,r,o,u;return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=t.state,s=a.username,c=a.password,i={username:s,password:c},"https://apis.ccbp.in/login",r={method:"POST",body:JSON.stringify(i)},e.next=7,fetch("https://apis.ccbp.in/login",r);case 7:return o=e.sent,e.next=10,o.json();case 10:u=e.sent,!0===o.ok?t.onSubmitSuccess(u.jwt_token):t.onSubmitFailure(u.error_msg);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.renderPasswordField=function(){var e=t.state.password;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("label",{htmlFor:"password",className:"input-label",children:"PASSWORD"}),Object(j.jsx)("input",{id:"password",type:"password",value:e,onChange:t.onChangePassword,placeholder:"Password",className:"input-field"})]})},t.renderUsernameField=function(){var e=t.state.username;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("label",{htmlFor:"username",className:"input-label",children:"USERNAME"}),Object(j.jsx)("input",{id:"username",type:"text",value:e,onChange:t.onChangeUsername,placeholder:"Username",className:"input-field"})]})},t}return Object(y.a)(n,[{key:"render",value:function(){var t=this.state,e=t.showSubmitError,n=t.errorMsg;return void 0!==O.a.get("jwt_token")?Object(j.jsx)(o.a,{to:"/"}):Object(j.jsx)("div",{className:"login-container",children:Object(j.jsxs)("form",{onSubmit:this.submitForm,className:"login-form",children:[Object(j.jsx)("h1",{className:"login-heading",children:"Restaurant Login"}),Object(j.jsx)("div",{className:"input-group",children:this.renderUsernameField()}),Object(j.jsx)("div",{className:"input-group",children:this.renderPasswordField()}),e&&Object(j.jsx)("p",{className:"error-message",children:n}),Object(j.jsx)("button",{type:"submit",className:"login-button",children:"Login"})]})})}}]),n}(a.Component)),C=_,w=n(30),k=n.n(w),q=n(32),S=(n(63),function(){var t=Object(a.useContext)(b),e=t.cartList,n=t.restaurant_name,s=Object(o.g)(),c=e.reduce((function(t,e){return t+e.quantity}),0);return Object(j.jsxs)("div",{className:"navbar",children:[Object(j.jsx)(r.b,{to:"/",className:"restaurant-link",children:Object(j.jsx)("h1",{children:n})}),Object(j.jsxs)("div",{className:"navbar-right",children:[Object(j.jsx)("button",{onClick:function(){O.a.remove("jwt_token"),s.push("/login")},className:"logout-button",type:"button","aria-label":"Logout",children:"Logout"}),Object(j.jsxs)("div",{className:"cart-container",children:[Object(j.jsx)("h4",{children:"My Orders"}),Object(j.jsx)(r.b,{to:"/cart",className:"cart-link",children:Object(j.jsxs)("div",{className:"cart-counts",children:[Object(j.jsx)("span",{className:"cart-count",children:c}),Object(j.jsx)("button",{type:"button",className:"cart-button","data-testid":"cart",children:Object(j.jsx)(q.a,{className:"cart-icon"})})]})})]})]})]})}),A=(n(64),function(t){var e,n=t.dish,s=Object(a.useContext)(b),c=s.cartList,i=s.addCartItem,r=s.incrementCartItemQuantity,o=s.decrementCartItemQuantity,u=c.find((function(t){return t.dish_id===n.dish_id})),m=Object(a.useState)(0),h=Object(d.a)(m,2),O=h[0],p=h[1];Object(a.useEffect)((function(){u&&p(u.quantity)}),[u]);var x=u?u.quantity:O;return Object(j.jsxs)("div",{className:"item-container",children:[Object(j.jsxs)("div",{className:"v-nv",children:[n.dish_Type&&Object(j.jsx)("span",{className:"dish-type ".concat(2===n.dish_Type?"veg":"non-veg"),children:2===n.dish_Type?"\ud83d\udfe2":"\ud83d\udd34"}),Object(j.jsxs)("div",{className:"dish-content",children:[Object(j.jsxs)("div",{className:"dish-info",children:[Object(j.jsx)("h1",{className:"dish-name",children:n.dish_name}),Object(j.jsxs)("h3",{className:"dish-price",children:[n.dish_currency," ",n.dish_price]}),Object(j.jsx)("p",{className:"dish-description",children:n.dish_description}),!n.dish_Availability&&Object(j.jsx)("p",{className:"unavailable-text",children:"Not available"})]}),n.dish_Availability&&Object(j.jsxs)("div",{className:"dish-controls",children:[Object(j.jsxs)("div",{className:"quantity-controls",children:[Object(j.jsx)("button",{type:"button",onClick:function(){n.dish_Availability&&(u&&u.quantity>0?o(n.dish_id):!u&&O>0&&p((function(t){return t-1})))},"data-testid":"minus","aria-label":"decrement",children:"-"}),Object(j.jsx)("p",{"data-testid":"active-count",children:x}),Object(j.jsx)("button",{type:"button",onClick:function(){n.dish_Availability&&(u?r(n.dish_id):p((function(t){return t+1})))},"data-testid":"plus","aria-label":"increment",children:"+"})]}),n.dish_Availability&&x>0&&Object(j.jsx)("button",{type:"button",className:"add-to-cart-button",onClick:function(){if(n.dish_Availability&&x>0)if(u){var t=O-u.quantity;if(t>0)for(var e=0;e<t;e+=1)r(n.dish_id);else if(t<0)for(var a=0;a<-t;a+=1)o(n.dish_id)}else i(Object(l.a)(Object(l.a)({},n),{},{quantity:O}))},"data-testid":"add-to-cart",children:"ADD TO CART"}),(null===(e=n.addonCat)||void 0===e?void 0:e.length)>0&&Object(j.jsx)("p",{className:"customization",children:"Customizations available"})]})]})]}),Object(j.jsxs)("div",{className:"dish-cal-img",children:[n.dish_calories>0&&Object(j.jsxs)("h4",{className:"dish-calories",children:[n.dish_calories," calories"]}),n.dish_image&&Object(j.jsx)("img",{src:n.dish_image,alt:n.dish_name,className:"dish-image","data-testid":"dish-image"})]})]})}),F=(n(65),function(t){var e=t.categories,n=t.activeTab,a=t.setActiveTab;return Object(j.jsx)("ul",{className:"menu-tab-container",children:e.map((function(t,e){return Object(j.jsx)("li",{children:Object(j.jsx)("button",{className:"tab ".concat(n===e?"active":""),onClick:function(){return a(e)},type:"button",children:t.menu_category},t.menu_category_id)})}))})}),I=function(){var t=Object(a.useState)(null),e=Object(d.a)(t,2),n=e[0],s=e[1],c=Object(a.useState)(0),i=Object(d.a)(c,2),r=i[0],o=i[1],u=Object(a.useContext)(b),l=u.cartList,m=u.setRestaurantName,h=function(){var t=Object(f.a)(Object(x.a)().mark((function t(){var e,n;return Object(x.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://apis2.ccbp.in/restaurant-app/restaurant-menu-list-details",t.next=3,fetch("https://apis2.ccbp.in/restaurant-app/restaurant-menu-list-details");case 3:if(!(e=t.sent).ok){t.next=9;break}return t.next=7,e.json();case 7:return n=t.sent,t.abrupt("return",n[0]);case 9:throw new Error("Failed to fetch data");case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(Object(a.useEffect)((function(){var t=function(){var t=Object(f.a)(Object(x.a)().mark((function t(){var e;return Object(x.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h();case 3:e=t.sent,s(e),m(e.restaurant_name),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Failed to fetch data:",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();t()}),[m]),!n)return Object(j.jsx)("div",{className:"loading","data-testid":"loader",children:Object(j.jsx)(k.a,{type:"Oval",color:"#ffffff",height:50})});var O=l.reduce((function(t,e){return t+e.quantity}),0),p=n.restaurant_name,v=n.restaurant_image,y=n.table_menu_list,g=y[r];return Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)("header",{children:Object(j.jsx)(S,{count:O,restaurant_name:p})}),v&&Object(j.jsx)("div",{className:"restaurant-hero",children:Object(j.jsx)("img",{src:v,alt:p,className:"restaurant-image"})}),Object(j.jsx)(F,{categories:y,activeTab:r,setActiveTab:o}),Object(j.jsx)("div",{className:"menu-content",children:Object(j.jsx)("div",{className:"dish-list",children:g.category_dishes.map((function(t){var e;return Object(j.jsx)(A,{dish:t,quantity:(null===(e=l.find((function(e){return e.dish_id===t.dish_id})))||void 0===e?void 0:e.quantity)||0},t.dish_id)}))})})]})},T=(n(66),function(){var t=Object(a.useContext)(b),e=t.cartList,n=t.incrementCartItemQuantity,s=t.decrementCartItemQuantity,c=t.removeCartItem;return Object(j.jsx)("ul",{className:"cart-items-list",children:e.map((function(t){return Object(j.jsxs)("li",{className:"cart-item",children:[Object(j.jsxs)("div",{className:"cart-item-left",children:[Object(j.jsx)("img",{src:t.dish_image,alt:t.dish_name,className:"cart-item-image"}),Object(j.jsxs)("div",{className:"cart-item-right",children:[Object(j.jsx)("h3",{children:t.dish_name}),Object(j.jsxs)("p",{className:"ci-dish-price",children:[t.dish_currency," ",t.dish_price]}),Object(j.jsxs)("div",{className:"cart-item-quantity",children:[Object(j.jsx)("button",{onClick:function(){return s(t.dish_id)},type:"button","data-testid":"decrement-button","aria-label":"decrease quantity",className:"cart-item-quantity-button",children:"-"}),Object(j.jsx)("span",{children:t.quantity}),Object(j.jsx)("button",{onClick:function(){return n(t.dish_id)},type:"button","data-testid":"increment-button","aria-label":"Increase quantity",className:"cart-item-quantity-button",children:"+"})]})]})]}),Object(j.jsx)("button",{onClick:function(){return c(t.dish_id)},className:"remove-item-btn",type:"button","data-testid":"remove","aria-label":"remove quantity",children:"Remove"})]},t.dish_id)}))})}),L=(n(67),function(){return Object(j.jsxs)("div",{className:"empty-cart-container",children:[Object(j.jsx)("img",{src:"https://assets.ccbp.in/frontend/react-js/nxt-trendz-empty-cart-img.png",alt:"empty cart",className:"empty-cart-image"}),Object(j.jsx)("h1",{className:"empty-cart-heading",children:"Your cart is empty"}),Object(j.jsx)("p",{className:"empty-cart-description",children:"Add some delicious items to get started!"}),Object(j.jsx)(r.b,{to:"/",className:"shop-now-button",children:"Shop Now"})]})}),P=(n(68),function(){var t,e=Object(a.useContext)(b),n=e.cartList,s=e.removeAllCartItems,c=e.getTotalPrice,i=e.restaurant_name,o=n.length;return Object(j.jsxs)("div",{className:"cart-app-container",children:[Object(j.jsx)(S,{count:o,restaurant_name:i}),Object(j.jsx)("div",{className:"cart-content-container",children:0===n.length?Object(j.jsx)(L,{}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"cart-header",children:[Object(j.jsx)("h1",{className:"cart-title",children:"My Cart"}),Object(j.jsx)("button",{onClick:s,className:"remove-all-button",type:"button","aria-label":"Remove all items","data-testid":"remove-all-button",children:"Remove All"})]}),Object(j.jsx)(T,{}),Object(j.jsxs)("div",{className:"cart-summary",children:[Object(j.jsxs)("div",{className:"order-total",children:[Object(j.jsx)("span",{children:"Order Total:"}),Object(j.jsxs)("span",{className:"total-price",children:[null===(t=n[0])||void 0===t?void 0:t.dish_currency," ",c()]})]}),Object(j.jsx)(r.b,{to:"/",className:"continue-shopping-link",children:"Continue Shopping"})]})]})})]})}),E=(n(69),function(){return Object(j.jsx)(m,{children:Object(j.jsx)(r.a,{children:Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{path:"/login",component:C}),Object(j.jsx)(p,{exact:!0,path:"/",component:I}),Object(j.jsx)(p,{exact:!0,path:"/cart",component:P})]})})})});i.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(E,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.e19c23a7.chunk.js.map